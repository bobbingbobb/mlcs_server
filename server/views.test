<!DOCTYPE HTML>
<html>
  <head>
    <!--載入JavaScript, jQuery, Popper.js, Bootstrap.js-->
    <link
	rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
	integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
	crossorigin="anonymous">

    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

    <script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
	integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
	crossorigin="anonymous"></script>

    <script
	src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
	integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
	crossorigin="anonymous"></script>

	<!--meta tags-->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!--mainpage-->
	<title>主頁面</title>
</head>

<body>
  <div class"cotainer-fluid">
    <div class="row">
	  <!--帳號相關資訊欄-->
	  <div class="col-2">
		<!--上車圖區-->
		<br>
	    <figure class="figure">

      {% if user.is_authenticated %}
      <img src="https://cdn1.iconfinder.com/data/icons/mix-color-4/502/Untitled-1-512.png" class="figure-img img-fluid rounded-circle" alt="上車上車">
		  <figcaption class="figure-caption text-right">{{user.username}}</figcaption>
      {% else %}
      <img src="https://zdnet1.cbsistatic.com/hub/i/2018/08/07/828a6f3b-a1b8-4030-9a41-2907daada863/63b984e5db9a0deb6555816e78e84793/ml-recorded-future.png" class="figure-img img-fluid rounded-circle" alt="上車上車">
      <figcaption class="figure-caption text-right">Welcome</figcaption>
      {% endif %}

		</figure>
		<!--功能欄-->
    {% if user.is_authenticated %}
	    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">

      <a class="nav-link active" id="v-pills-dashboard-tab" data-toggle="pill" href="#v-pills-dashboard" role="tab"
  		aria-controls="v-pills-dashboard" aria-selected="true">Dashboard</a>

		  <a class="nav-link" id="v-pills-select-tab" data-toggle="pill" href="#v-pills-select" role="tab"
		  aria-controls="v-pills-select" aria-selected="false">Select</a>

      <a class="nav-link" id="v-pills-save-tab" data-toggle="pill" href="#v-pills-save" role="tab"
		  aria-controls="v-pills-save" aria-selected="false">Save</a>

      <a class="nav-link" id="v-pills-upload-tab" data-toggle="pill" href="#v-pills-upload" role="tab"
		  aria-controls="v-pills-upload" aria-selected="false">Upload Files</a>

		</div>
		<br><hr>
		<!--登出-->
		<button type="button" class="btn btn-outline-danger btn-sm btn-block" onclick="javascript:location.href='{% url 'logout' %}'">Logout</button>
    {% else %}
    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
    <a class="nav-link" id="v-pills-signup-tab" data-toggle="pill" href="#v-pills-signup" role="tab"
    aria-controls="v-pills-signup" aria-selected="false">SignUp</a>

    <a class="nav-link" id="v-pills-login-tab" data-toggle="pill" href="#v-pills-login" role="tab"
    aria-controls="v-pills-login" aria-selected="false">Login</a>
    </div>
    {% endif %}
    </div>
    <div class="col-10">

	    <div class="tab-content" id="v-pills-tabContent">

      <div class="tab-pane fade show active" id="v-pills-dashboard" role="tabpanel"
		  aria-labelledby="v-pills-dashboard-tab">

      {% if user.is_authenticated %}

      <table border="1">
        <thead>
          <tr>
    	  <td>ID</td>
  	  <td>Name</td>
      <td>Ram</td>
      <td>Port</td>
  	  <td>State</td>
  	</tr>
        </thead>
        <tbody>
          {% for u in userown %}
  	<tr>
  	  <td>{{ u.id }}</td>
  	  <td>{{ u.name }}</td>
      <td>{{ u.ram }}</td>
      <td>{{ u.port }}</td>
  	  <td>{{ u.status }}</td>
  	</tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>Welcome to MLCS</p>
      <p>please login or register</p>

      {% endif %}

		  </div>

          <div class="tab-pane fade" id="v-pills-select" role="tabpanel"
		  aria-labelledby="v-pills-select-tab">
      <form action="{% url 'select' %}" method="post">
        {% csrf_token %}
        <HR>
        <h4>name of container</h4>
        name: <input type="text" name="cname" required autofocus>
        <HR>
        <h4>GPU</h4>
        <table>
          {% for g in gpu %}
            <input type="checkbox" name="gpuselect" value="{{ g.id }}">{{ g.name }}<br>
          {% endfor %}
        </table>
        <HR>
        <h4>RAM</h4>
        ram: <input type="text" name="ram" required>Gb
        <HR>
        <h4>image</h4>
        <select name=imageselect>
          {% for i in image %}
            <option value="{{ i.name }}">{{ i.name }}</option>
          {% endfor %}
        </select>
        <HR>
          {% for e in error %}
            <p style="color: red">{{ e }}</p>
          {% endfor %}
        <input type="submit" value="add" name="submit">
      </form>
		  </div>

          <div class="tab-pane fade" id="v-pills-save" role="tabpanel"
		  aria-labelledby="v-pills-save-tab">
      <p>3333</p>
		  </div>

          <div class="tab-pane fade" id="v-pills-upload" role="tabpanel"
		  aria-labelledby="v-pills-upload-tab">
      <div class="custom-file">
        <input type="file" class="custom-file-input" id="customFile">
        <label class="custom-file-label" for="customFile">Choose file</label>
      </div>
		  </div>

		  <div class="tab-pane fade" id="v-pills-signup" role="tabpanel"
		  aria-labelledby="v-pills-signup-tab">
      <div class"cotainer-fluid">
        <div class="row justify-content-center">
          <div class="col-3">
    	    <br>
    	    <p class="h1 text-center">Sign up</p>
    		<br>
      <form action="{% url 'sign' %}" method="post">
        {% csrf_token %}
          {% for field in text %}
          <div class="form-group">
            {{ field.label_tag}}<br>
            {{ field }}
            {% if field.help_text %}
              <!--<small style="color: grey">{{ field.help_text }}</small>-->
            {% endif %}

          </div>
        {% endfor %}
        <button type="submit" class="btn btn-primary">Submit</button>
        <button type ="button" onclick="javascript:location.href='{% url 'index' %}'" class="btn btn-primary">back</button>
       {% for field in text %}
        {% for error in field.errors %}
          <p style="color: red">{{ error }}</p>
        {% endfor %}
        {% endfor %}
      </form>
    </div>
  </div>
  </div>
		  </div>

		  <div class="tab-pane fade" id="v-pills-login" role="tabpanel"
		  aria-labelledby="v-pills-login-tab">
      <div class"cotainer-fluid">
        <div class="row justify-content-center">
          <div class="col-3">
          <br>
          {% if form.errors %}
          <p>wrong account or password</p>
          {% endif %}
          {% if next %}
          <p>no authorization</p>
          {% endif %}
          <p class="h1 text-center">Login</p>
    		<br>
          <form action="{% url 'login' %}" method="post">
            {% csrf_token %}
            <div class="form-group">
              <label for="UserName">User ID</label>
            <p>{{form.username}}</p>
            </div>
            <div class="form-group">
              <label for="Password">Password</label>
            <p>{{form.password}}</p>
            </div>

            <button type="submit" class="btn btn-primary">Login</button>
            <input type="hidden" name="next" value="{{ next }}">
          </form>
        </div>
    	</div>
      </div>
		  </div>

        </div>

	  </div>
    </div>
    </div>
  </body>
</html>
